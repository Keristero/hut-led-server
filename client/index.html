<head>
    <script src="/socket.io/socket.io.js"></script>
    <script defer>
    var socket = io();
    let pixelElements = []
    let div_strip = document.getElementById('strip')
    let button_set = document.getElementById('set')

    socket.on('stripColor',function(stripColor){
        console.log('stripColor',stripColor)
        stripColor.forEach((hex,index)=>{
            if(!pixelElements[index]){
                let picker = document.createElement("input")
                picker.type = "color"
                picker.value = hex;
                div_strip.appendChild(picker);
                pixelElements.push(picker)
            }else{
                let picker = pixelElements[index]
                picker.type = "color"
                picker.value = hex;
            }
        })
    })

    function getElementColors(){
        let stripColor = []
        pixelElements.forEach((element,index)=>{
            stripColor.push(element.value)
        })
        return stripColor;
    }

    button_set.onclick = function(){
        socket.emit('setStripColor',getElementColors())
    }
    </script>
</head>
<body>
    <h1>YoUu hacked the mainframe.</h1>
    <button id="set"></button>
    <div id="strip">

    </div>
</body>